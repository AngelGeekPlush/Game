<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Angel Geek</title>
   <style>
    html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        width: 100%;
        display: flex; /* Centra el canvas */
        justify-content: center;
        align-items: center;
        background: black;
        overflow: hidden;
    }
    canvas {
        display: block;
        width: 100vw;
        height: 100vh;
        background: black;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        touch-action: none; /* Previene el zoom y scroll t√°ctil */
    }

    #textBoxContainer {
        position: fixed; /* Mantiene la posici√≥n relativa al viewport */
        bottom: 0;
        left: 0;
        width: 100vw;
        height: 75vh; /* Altura para PC, ser√° anulada por la media query para m√≥vil */
        
        /* Propiedades de la Imagen de Fondo */
        background-image: url('./img/dialogue_box_background.webp');
        background-size: contain; /* La imagen se ajustar√° completamente sin recortarse */
        background-repeat: no-repeat;
        background-position: center center; /* La imagen de fondo se centrar√° dentro del contenedor */
        box-sizing: border-box; /* ‚úÖ A√±adir esto */
        z-index: 10;
        overflow: hidden; /* Importante para que background-size: contain no muestre scrollbars si la imagen es muy grande */
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
        padding: 15px; /* AJUSTADO: Un padding m√°s compacto para el dise√±o flexbox */

       display: flex; /* ¬°CAMBIADO A FLEXBOX para organizar el contenido en fila! */
       flex-direction: row; /* ¬°Los elementos (imagen y texto) ir√°n uno al lado del otro! */
       align-items: center; /* Centra verticalmente la imagen y el texto dentro de la caja */
       justify-content: center; /* Centra horizontalmente el contenido total de la caja */
       text-align: center; /* Mantenemos esto si quieres que el texto dentro de <p> o <span> se centre */
       font-size: 1.2em; /* Tu tama√±o de fuente */
       line-height: 1.5; /* Tu altura de l√≠nea */
       z-index: 10;
       pointer-events: none;
       user-select: none;
       animation: fadeIn 0.3s ease-out forwards;

    }

   
 @media (max-width: 700px) {
        #textBoxContainer {
            /* --- ¬°MODIFICACI√ìN CLAVE 1 AQU√ç!: Hacer la caja de texto m√°s ALTA en m√≥vil --- */
            /* Aumenta este valor para darle m√°s espacio al texto y que la imagen lo cubra.
            Puedes probar con 40vh, 50vh, 60vh, etc. */
            height: 30vh; /* <-- ¬°AJUSTA ESTE VALOR! Ahora ocupa la mitad de la pantalla */
            /* --- ¬°MODIFICACI√ìN CLAVE 2 AQU√ç!: Forzar a la imagen a llenar completamente la caja en m√≥vil --- */
            /* Esto podr√≠a distorsionar la imagen si su aspecto no coincide con el 100vw x 50vh */
            background-size: 100% 100%; /* <-- ¬°AJUSTA ESTO! Llena ancho y alto sin respetar aspecto */
            /* background-position: center center; sigue siendo √∫til para c√≥mo se "estira" */
            flex-direction: row; /* Mantenemos los elementos en fila */
            padding: 10px; /* Padding m√°s peque√±o para m√≥viles */
        }
       #dialogueItemImage {
       width: 60px; /* TAMA√ëO FIJO para la imagen (ajusta estos valores) */
    height: 60px; /* TAMA√ëO FIJO */
    min-width: 60px; /* Tama√±o m√≠nimo para asegurar visibilidad en m√≥viles */
    min-height: 60px;
    max-width: 60px; /* L√≠mite para que no crezca demasiado en pantallas grandes */
    max-height: 60px;
    margin-left: 50px;
    margin-top: 80px;
    margin-right: 50px; /* CLAVE: Espacio a la derecha de la imagen para separarla del texto */
    }
        #textContent {
            /* --- AJUSTES PARA EL TEXTO EN M√ìVIL --- */
            font-size: clamp(4px, 3.5vw, 16px); /* AJUSTA: min a 8px (o menos), preferred a 2.8vw */
            padding: 1vh 1vw; /* Relleno ajustado para m√≥vil */
           /* max-width: 100%;  Ancho m√°ximo ajustado para m√≥vil */
            width: 100%;  
            box-sizing: border-box; /* üîÅ Incluye el padding dentro del width */
            text-align: center;
            overflow: visible;
            text-overflow: clip;
            line-height: 1; /* Se recomienda para texto multil√≠nea */
           
        }
        

        #dismissPrompt {
            /* AJUSTES PARA DISMISS PROMPT EN M√ìVIL SI ES NECESARIO */
             font-size: clamp(6px, 1.2vw, 10px); 
           
        }
    }
 
    #textBoxBackground {
        display: none; /* Asegura que el <img> no se vea si a√∫n existe en HTML */
    }
    #textContent {
        /* --- PROPIEDADES CR√çTICAS PARA EL TEXTO PRINCIPAL (APLICAN EN AMBOS BREAKPOINTS POR DEFECTO) --- */
       /* position: absolute;  Posiciona el texto de forma absoluta dentro de #textBoxContainer */
      /*  top: 71%;           Ajuste vertical inicial: 65% del padre desde arriba */
      /*  left: 50%;           Centrado horizontal en el padre */
     /*   transform: translate(-50%, -50%);  Ajuste fino para centrar el propio elemento */
        color: #21190e; /* Color de texto preferido por el usuario */
        font-size: clamp(19px, 2.5vw, 30px); /* Tama√±o de fuente responsivo general para PC */
        padding: 1vh 1vw; /* Relleno responsivo general para PC (vertical 1%vh, horizontal 1%vw) */
        /*max-width: 96%;  Ancho m√°ximo para el texto, 96% del padre */
        line-height: 1.2; /* Altura de l√≠nea m√°s peque√±a */
        font-family: 'Press Start 2P', Arial, sans-serif; 
        text-align: left; /* Centra las l√≠neas de texto dentro de su bloque */
        pointer-events: none;
        z-index: 11; /* Asegura que est√© por encima de la imagen de fondo */
        width: 100%;
        /* --- PROPIEDADES PARA CONTROLAR EL FLUJO DE TEXTO (UNA L√çNEA) --- */
        white-space: normal; /* Permite el salto de l√≠nea normal */
        overflow: hidden;   /* Asegura que el texto sea visible aunque salte de l√≠nea */
        text-overflow: clip;
        box-sizing: border-box;
       /* margin-top: 0; AJUSTADO: No necesitamos margen superior porque flexbox lo controla */
       /* padding-top: 0;  AJUSTADO */
        max-width: calc(100% - 120px); /* ‚úÖ Resta el ancho de la imagen + padding */
        /*text-align: left;  ¬°CLAVE: El texto de p√°rrafo se alinea a la izquierda dentro de su propio espacio! */
        flex-grow: 1; /* ¬°CLAVE: Permite que el texto ocupe todo el espacio restante en la fila! */
        /* Puedes quitar o ajustar el max-width si no lo necesitas, con flex-grow: 1 suele ser suficiente */
        /* max-width: calc(100% - 95px);  */
    }

    #dismissPrompt {
        position: absolute; /* Posiciona el mensaje de cierre de forma absoluta */
        bottom: 05 vh; /* Ajuste vertical actual */
        left: 50%; /* Lo centra horizontalmente */
        transform: translateX(-50%); /* Lo mueve a la izquierda por la mitad de su propio ancho para centrarse */
        color: #000;
        font-size: clamp(10px, 1.5vw, 16px);
        pointer-events: none;
        z-index: 11;
    }

    #inventoryPanel {
        position: fixed; /* Lo fija en la pantalla */
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%); /* Centra el panel en la pantalla */
        width: 80vw; /* Ancho del 80% del viewport */
        height: 70vh; /* Alto del 70% del viewport */
        max-width: 500px; /* Ancho m√°ximo para pantallas grandes */
        max-height: 700px; /* Alto m√°ximo para pantallas grandes */
        background-color: rgba(30, 30, 30, 0.95); /* Fondo oscuro semitransparente */
        border: 2px solid #663399; /* Borde morado para estilo RPG */
        border-radius: 15px; /* Bordes redondeados */
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.7); /* Sombra suave */
        color: white;
        font-family: 'Press Start 2P', Arial, sans-serif;
        padding: 20px;
        display: none; /* ¬°Oculto por defecto! JavaScript lo mostrar√° */
        flex-direction: column; /* Organiza el contenido verticalmente */
        justify-content: flex-start; /* Alinea el contenido al inicio */
        align-items: center; /* Centra el contenido horizontalmente */
        z-index: 100; /* Asegura que est√© por encima de todo lo dem√°s */
        overflow-y: auto; /* Permite desplazamiento vertical si hay muchos √≠tems */
    }

    #inventoryTitle {
        font-size: clamp(20px, 4vw, 36px); /* T√≠tulo responsivo */
        color: #FFD700; /* Color dorado para el t√≠tulo */
        margin-bottom: 20px;
        text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5); /* Sombra para el texto */
    }

    #inventoryList {
        list-style: none; /* Elimina los puntos de la lista */
        padding: 0;
        margin: 0;
        width: 90%; /* Ancho de la lista dentro del panel */
        flex-grow: 1; /* Permite que la lista ocupe el espacio disponible */
        text-align: center; /* Centra el texto de los √≠tems */
    }

    .inventory-item {
        display: flex; /* Para alinear el icono y el texto */
        align-items: center; /* Centra verticalmente el icono y el texto */
        justify-content: center; /* Centra horizontalmente el √≠tem completo */
        font-size: clamp(14px, 2.5vw, 24px); /* Tama√±o del texto del √≠tem responsivo */
        padding: 8px 0;
        border-bottom: 1px solid rgba(255, 255, 255, 0.2); /* L√≠nea divisoria */
        text-transform: capitalize; /* Capitaliza la primera letra */
    }

    .inventory-item:last-child {
        border-bottom: none; /* No hay l√≠nea en el √∫ltimo √≠tem */
    }

    .inventory-item-icon {
        width: 32px; /* Tama√±o del icono */
        height: 32px;
        margin-right: 10px; /* Espacio entre icono y texto */
        image-rendering: pixelated; /* Si tus iconos son pixel art */
    }

    #closeInventoryButton {
        background-color: #A0522D; /* Color marr√≥n para el bot√≥n */
        color: white;
        font-family: 'Press Start 2P', Arial, sans-serif;
        font-size: clamp(12px, 2vw, 20px);
        padding: 10px 20px;
        border: 2px solid #CD853F; /* Borde m√°s claro */
        border-radius: 8px;
        cursor: pointer;
        margin-top: 20px;
        box-shadow: 3px 3px 8px rgba(0, 0, 0, 0.4);
        transition: background-color 0.2s ease, transform 0.1s ease;
    }

    #closeInventoryButton:hover {
        background-color: #CD853F;
        transform: translateY(-2px); /* Efecto al pasar el rat√≥n */
    }

    #closeInventoryButton:active {
        background-color: #8B4513;
        transform: translateY(0); /* Efecto al presionar */
    }

    /* Media query para m√≥viles: ajustar tama√±o del panel si es necesario */
    @media (max-width: 600px) {
        #inventoryPanel {
            width: 95vw; /* M√°s ancho en m√≥vil */
            height: 80vh; /* M√°s alto en m√≥vil */
            padding: 10px;
        }
        #inventoryTitle {
            margin-bottom: 10px;
        }
        #closeInventoryButton {
            margin-top: 10px;
            padding: 8px 15px;
        }
    }

    #dialogueItemImage {
    /* REMOVIDAS: position: absolute, top, left, transform */
    /* Estas propiedades ya no son necesarias porque est√° dentro de un flexbox */
    
    width: 392px; /* TAMA√ëO FIJO para la imagen (ajusta estos valores) */
    height: 550px; /* TAMA√ëO FIJO */
    min-width: 200px; /* Tama√±o m√≠nimo para asegurar visibilidad en m√≥viles */
    min-height: 280px;
    max-width: 392px; /* L√≠mite para que no crezca demasiado en pantallas grandes */
    max-height: 550px;
    margin-left: 50px;
    margin-top: 80px;
    margin-right: 50px; /* CLAVE: Espacio a la derecha de la imagen para separarla del texto */
    object-fit: contain; /* Asegura que la imagen se ajuste sin recortarse */
    display: none; /* Oculto por defecto, JavaScript lo mostrar√° */
    z-index: 12;
    border-radius: 8px; /* Tus bordes redondeados */
   
    image-rendering: pixelated; /* Si tus iconos son pixel art */
    animation: itemImagePopIn 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards; /* Tu animaci√≥n */
}
</style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <!-- Carga el archivo principal del juego como un m√≥dulo -->
     <!-- ¬°NUEVA ESTRUCTURA DE LA CAJA DE TEXTO HTML AQU√ç! -->
    <div id="textBoxContainer">
        <img id="dialogueItemImage" src="" alt="Item" style="display: none;">
         <div id="textContent"></div>
        <div id="dismissPrompt"></div>
    </div>

     <div id="inventoryPanel">
        <h2 id="inventoryTitle">Inventario</h2>
        <ul id="inventoryList">
            <!-- Los √≠tems se insertar√°n aqu√≠ con JavaScript -->
            <!-- Ejemplo de c√≥mo se ver√° un √≠tem: -->
            <!-- <li class="inventory-item"><img src="./img/inventory_items/reaper_card_icon.png" alt="Tarjeta Reaper" class="inventory-item-icon"><span>Tarjeta Reaper</span></li> -->
        </ul>
        <button id="closeInventoryButton">Cerrar</button>
    </div>


    <script type="module" src="./js/game.js?v=64"></script>
</body>
</html>
